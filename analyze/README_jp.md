私は感情記憶実験のデータを持っており、Pythonで回帰分析を行って「記憶タイプ（感覚／順序）」と「告知条件（告知／未告知）」が正答率に与える影響を調べたいと考えています。

### 一、データ構造（原始レベル）
現在の生データは一行が「被験者 × 問題」の解答記録になっており、列はおおよそ以下の通りです：
- `subject_id`：被験者ID
- `item_id`：問題番号（1–134 は感覚的詳細記憶問題、135–206 は順序記憶問題）
- `correct`：その問題の正否（1=正解、0=不正解）
- `expectancy`：告知条件（0=未告知、1=告知）


私は感情記憶実験のデータを持っており、Pythonで回帰分析を行って「記憶タイプ（感覚／順序）」と「告知条件（告知／未告知）」が正答率に与える影響を調べたいと考えています。

### 一、データ構造（原始レベル）
現在の生データは一行が「被験者 × 問題」の解答記録になっており、列はおおよそ以下の通りです：
- `subject_id`：被験者ID
- `item_id`：問題番号（1–134 は感覚的詳細記憶問題、135–206 は順序記憶問題）
- `correct`：その問題の正否（1=正解、0=不正解）
- `expectancy`：告知条件（0=未告知、1=告知）

### 二、データ前処理の要件
1. まず `item_id` に基づいて新しいカテゴリ変数 `memory_type` を作成します：
	- `item_id` が 1〜134 の場合、`memory_type = "verbatim"`
	- `item_id` が 135〜206 の場合、`memory_type = "order"`

2. 次にデータを「問題レベル」から「被験者 × 記憶タイプ × 告知条件」レベルに集約し、各被験者が各条件で示した正答率を計算します：
	- `groupby(subject_id, memory_type, expectancy)` の後に `correct` の平均を取り、`accuracy`（0〜1）を得ます。

結果として得られるロングフォーマットのデータフレームは少なくとも次の列を含みます：
- `subject_id`
- `memory_type`（"verbatim" または "order"）
- `expectancy`（0 または 1）
- `accuracy`（当該被験者のそのタイプ×告知条件下での正答率）

### 三、回帰分析モデル
集約後のデータに対して `statsmodels` 等を用いて線形回帰を行います：

モデル1：記憶タイプの主効果のみを見る
- `accuracy ~ C(memory_type)`

モデル2：記憶タイプと告知条件およびその交互作用を含める
- `accuracy ~ C(memory_type) * C(expectancy)`

ここで：
- `C(memory_type)` はカテゴリ変数（感覚 vs 順序）
- `C(expectancy)` はカテゴリ変数（告知 vs 未告知）
- 注目点：
  - 記憶タイプの主効果（順序記憶が感覚記憶より高いか）
  - 告知条件の主効果
  - 両者の交互作用の有意性

### 四、出力（詳細）
1. 各モデルについて、回帰係数、標準誤差、t 値、p 値、決定係数（R²）などのサマリーを出力します。
2. 出力結果を論文向けに整理した文言の例を作成します。例えば：
	- 記憶タイプの主効果が有意（順序 > 感覚）：β = ..., t = ..., p = ...
	- 告知条件の主効果：β = ..., t = ..., p = ...
	- 交互作用の有意性の有無（有意であれば簡潔な解釈を添える）
3. 交互作用を可視化するプロット（`memory_type × expectancy` に対する `accuracy` の折れ線図や棒グラフ）を作成し、論文に使える図を出力します。

---

必要であれば、以下を追加で用意できます：
- 実際の `pandas` 集約（`groupby`）と `statsmodels` による回帰のサンプルコード。
- 出力をCSV/Excelに保存する手順と、図を高解像度で保存する方法。

ご希望があれば、これらのサンプルコードや保存スクリプトも作成します。



